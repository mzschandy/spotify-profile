(this["webpackJsonpspotify-profile"]=this["webpackJsonpspotify-profile"]||[]).push([[0],{25:function(e,t,s){},26:function(e,t,s){},47:function(e,t,s){"use strict";s.r(t);var n=s(2),c=s.n(n),r=s(19),a=s.n(r),i=(s(25),s(5)),l=(s(26),s(6)),o=s.n(l),d=s(7),m=s(1),j=function(e){var t=e.artist,s=e.image;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"p-4 spotify-gray rounded-md w-full relative",children:Object(m.jsxs)("div",{className:"h-full",children:[Object(m.jsx)("div",{className:"md:rounded-full relative md:mb-4",children:Object(m.jsx)("div",{className:"image-container w-full relative rounded-full",children:Object(m.jsx)("div",{children:Object(m.jsx)("img",{className:"rounded-full bg-green-800 absolute left-0 top-0 w-full h-full",src:s,alt:"artist avatar"})})})}),Object(m.jsxs)("div",{className:"card-bottom",children:[Object(m.jsx)("div",{className:"max-w-full md:text-base text-sm",children:t}),Object(m.jsx)("div",{className:"text-xs mt-2",children:"Artist"})]})]})})})},u=function(e){var t=e.artists;return console.log("cardlister arists",t),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-6 md:gap-6",children:t?t.items.slice(0,6).map((function(e,t){return Object(m.jsx)(j,{artist:e.name,image:e.images[1].url},t)})):Object(m.jsx)("div",{children:"Loading..."})})})},x=function(e){var t=e.name,s=e.artist,n=e.album,c=e.length,r=e.image,a=e.counter,i=function(e){var t=Math.floor(e/6e4),s=(e%6e4/1e3).toFixed(0);return 60===s?t+1+":00":t+":"+(s<10?"0":"")+s}(c);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"gridcell grid rounded-sm px-4 md:gap-4 h-14 spotify-gray",children:[Object(m.jsx)("div",{className:"md:flex items-center hidden",children:a+=1}),Object(m.jsxs)("div",{className:"flex justify-start items-center",children:[Object(m.jsx)("div",{className:"mr-4 bg-green-700 w-10 h-10",children:Object(m.jsx)("img",{className:"w-10 h-10",src:r,alt:"album cover"})}),Object(m.jsxs)("div",{className:"flex md:block flex-col overflow-ellipsis",children:[Object(m.jsx)("div",{className:"text-base overflow-hidden overflow-ellipsis w-52 whitespace-nowrap",children:t}),Object(m.jsx)("div",{className:"md:text-sm text-xs",children:s})]})]}),Object(m.jsx)("div",{className:"hidden md:flex items-center justify-self-start",children:n}),Object(m.jsx)("div",{className:"hidden md:flex items-center justify-self-end",children:i})]})})},f=function(e){var t=e.songs;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"",children:t?t.items.slice(0,10).map((function(e,t){return Object(m.jsx)(x,{counter:t,name:e.name,album:e.album.name,artist:e.artists[0].name,length:e.duration_ms,image:e.album.images[2].url},t)})):Object(m.jsx)("div",{children:"Loading..."})})})},b=function(e){var t=e.timePeriod,s=e.artists,n=e.songs;return console.log("tab component",s),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"text-base md:text-2xl mb-4",children:["Top Artists ",t]}),Object(m.jsx)(u,{artists:s}),Object(m.jsxs)("div",{className:"text-base md:text-2xl my-4",children:["Top Songs ",t]}),Object(m.jsx)(f,{songs:n})]})},h=s(3),g=s.n(h),p=function(e){window.localStorage.setItem("spotifyTokenTimestamp",Date().now),window.localStorage.setItem("spotifyAccessToken",e)},O=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/refresh_token?refresh_token=".concat(void window.localStorage.getItem("spotifyRefreshToken")));case 2:t=e.sent,s=t.data,n=s.accessToken,p(n),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=function(){for(var e,t={},s=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);e=s.exec(n);)t[e[1]]=decodeURIComponent(e[2]);return t}(),t=e.error,s=e.access_token;e.refresh_token;t&&(console.log(t),O()),Date.now()-void window.localStorage.getItem("spotifyTokenTimestamp")>36e5&&(console.warn("Access token has expired, refreshing..."),O());var n=void window.localStorage.getItem("spotifyAccessToken");if((!n||"undefined"===n)&&s)return p(s),function(e){window.localStorage.setItem("spotifyRefreshToken",e)}(s),s}(),w={Authorization:"Bearer ".concat(v),"Content-Type":"application/json"},y=function(){return g.a.get("https://api.spotify.com/v1/me",{headers:w})},N=function(){return g.a.get("https://api.spotify.com/v1/me/top/artists?limit=50&time_range=short_term",{headers:w})},k=function(){return g.a.get("https://api.spotify.com/v1/me/top/artists?limit=50&time_range=medium_term",{headers:w})},T=function(){return g.a.get("https://api.spotify.com/v1/me/top/artists?limit=50&time_range=long_term",{headers:w})},S=function(){return g.a.get("https://api.spotify.com/v1/me/top/tracks?limit=50&time_range=long_term",{headers:w})},F=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),s=t[0],c=t[1],r=Object(n.useState)(null),a=Object(i.a)(r,2),l=a[0],j=a[1],u=Object(n.useState)(null),x=Object(i.a)(u,2),f=x[0],h=x[1],p=Object(n.useState)(null),O=Object(i.a)(p,2),v=O[0],y=O[1],F=Object(n.useState)(null),_=Object(i.a)(F,2),A=_[0],I=_[1],C=Object(n.useState)(null),L=Object(i.a)(C,2),M=L[0],P=L[1],E=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s,n,r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return t=e.sent,e.next=5,k();case 5:return s=e.sent,e.next=8,T();case 8:return n=e.sent,e.next=11,g.a.get("https://api.spotify.com/v1/me/top/tracks?limit=50&time_range=short_term",{headers:w});case 11:return r=e.sent,e.next=14,g.a.get("https://api.spotify.com/v1/me/top/tracks?limit=50&time_range=medium_term",{headers:w});case 14:return a=e.sent,e.next=17,S();case 17:i=e.sent,c(t),j(s),h(n),y(r),I(a),P(i);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){E()}),[]);var B=function(e){var t,s;for(s=document.getElementsByClassName("content"),t=0;t<s.length;t++)s[t].style.display="none";document.getElementById(e).style.display="block"};return console.log("artistsMonth",s),console.log("artistsYear",l),console.log("artistsAllTime",f),console.log("songsMonth",v),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"text-center mb-4 md:mb-0",children:[Object(m.jsx)("button",{id:"defaultOpen",onClick:function(){return B("ThisMonth")},className:"text-xs md:text-base mx-1 md:mx-5 tab rounded-sm p-1 md:p-2",children:"This Month"}),Object(m.jsx)("button",{onClick:function(){return B("ThisYear")},className:"mx-1 md:mx-5 tab rounded-sm p-1 md:p-2 text-xs md:text-base",children:"Year So Far"}),Object(m.jsx)("button",{onClick:function(){return B("AllTime")},className:"mx-1 md:mx-5 tab rounded-sm p-1 md:p-2 text-xs md:text-base",children:"All Time"})]}),Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)("div",{id:"ThisMonth",className:"content default hidden w-full",children:s&&v?Object(m.jsx)(b,{timePeriod:"This Month",artists:s.data,songs:v.data}):Object(m.jsx)("div",{children:"Loading..."})}),Object(m.jsx)("div",{id:"ThisYear",className:"content hidden w-full",children:l&&A?Object(m.jsx)(b,{timePeriod:"This Year",artists:l.data,songs:A.data}):Object(m.jsx)("div",{children:"Loading..."})}),Object(m.jsx)("div",{id:"AllTime",className:"content hidden w-full",children:f&&M?Object(m.jsx)(b,{timePeriod:"of All Time",artists:f.data,songs:M.data}):Object(m.jsx)("div",{children:"Loading..."})})]})]})},_=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),s=t[0],c=t[1],r=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){r()}),[]),console.log("Avatar user >",s),Object(m.jsx)(m.Fragment,{children:s?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"rounded-full h-24 w-24 md:h-56 md:w-56 flex items-center justify-center bg-green-700 text-center mx-auto ",children:Object(m.jsx)("img",{className:"rounded-full h-24 w-24 md:h-56 md:w-56",src:s.data.images[0].url,alt:"user avatar"})}),Object(m.jsx)("div",{className:"text-center text-xl md:text-4xl my-4 md:my-6",children:s.data.display_name})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"rounded-full h-24 w-24 md:h-56 md:w-56 flex items-center justify-center bg-green-700 text-center mx-auto "}),Object(m.jsx)("div",{className:"text-center text-xl md:text-4xl my-4 md:my-6",children:"Loading..."})]})})},A=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"rounded-lg md:rounded-md spotify-dark-gray m-3 p-4 md:m-10 md:p-10",children:[Object(m.jsx)(_,{}),Object(m.jsx)(F,{})]})})},I=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(A,{})})},C=s(20),L=s(0),M=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"w-screen h-screen flex",children:Object(m.jsxs)("div",{className:"justify-center self-center mx-auto",children:[Object(m.jsx)("div",{className:"text-4xl font-semibold mb-4",children:"Spotify Profile"}),Object(m.jsxs)("a",{className:"px-4 py-2 bg-green-700 rounded-full w-52 h-14 flex text-center justify-center items-center mx-auto",href:"https://spotify-profile-card.herokuapp.com/login",children:[Object(m.jsx)(L.b.Provider,{value:{size:"2em"},children:Object(m.jsx)("span",{children:Object(m.jsx)(C.a,{})})}),Object(m.jsx)("div",{className:"ml-2",children:"Login with Spotify"})]})]})})})},P=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){c(v)}),[]),Object(m.jsx)(m.Fragment,{children:s?Object(m.jsx)(I,{}):Object(m.jsx)(M,{})})},E=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,48)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;s(e),n(e),c(e),r(e),a(e)}))};a.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(P,{})}),document.getElementById("root")),E();t.default=P}},[[47,1,2]]]);
//# sourceMappingURL=main.195c3447.chunk.js.map